#Bot file for discord

# bot.py
import os
import discord
from dotenv import load_dotenv
import openai 

load_dotenv()

TOKEN = os.getenv('DISCORD_TOKEN')
OPENAI_KEY = os.getenv('OPENAI_KEY')


openai.api_key = os.environ.get('OPENAI_KEY')




intents = discord.Intents.all()
client = discord.Client(command_prefix='!', intents=intents)

#

'''@client.event
async def on_ready():
  print('We have logged in as {0.user}'.format(client))'''

# Only respond to messages from other users. Ignore messages from bot.
@client.event
async def on_message(message):
  if message.author == client.user:
    return #await message.channel.send(message.content)
  

# Use the OpenAI API to generate a response to the message
 
  response = openai.Completion.create(
  engine="text-davinci-003",
  prompt=f"{message.content}",
  max_tokens=150,
  temperature=0.5,
  )
   # Send the response as a message
  await message.channel.send(response.choices[0].text)

    

# start the bot
client.run(TOKEN)